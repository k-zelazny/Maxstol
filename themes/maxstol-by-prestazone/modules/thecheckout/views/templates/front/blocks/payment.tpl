{**
* NOTICE OF LICENSE
*
* This source file is subject to the Software License Agreement
* that is bundled with this package in the file LICENSE.txt.
*
*  @author    Peter Sliacky (Prestasmart)
*  @license   http://opensource.org/licenses/osl-3.0.php  Open Software License (OSL 3.0)
*}

<div class="block-header payment-method-header">{l s='Payment methods' d='Maxstol.Theme.Checkout'}</div>
<div class="inner-wrapper">
  <div class="error-msg">{l s='Please select a payment method' mod='thecheckout'}</div>
  {if isset($shipping_payment_blocks_wait_for_selection) && $shipping_payment_blocks_wait_for_selection}
    <div class="dummy-block-container disallowed">
      <span>{l s='Please choose delivery country to see payment options' mod='thecheckout'}</span></div>
  {elseif isset($payment_block_wait_for_address) && $payment_block_wait_for_address|count}
    <div class="dummy-block-container disallowed">
        <span>{l s='First, please enter your: ' mod='thecheckout'}
          <ul>
            {foreach $payment_block_wait_for_address as $field_name}
              <li>{$field_name|escape:'htmlall':'UTF-8'}</li>
            {/foreach}
          </ul>
        </span>
    </div>
  {elseif isset($force_email_wait_for_enter) && $force_email_wait_for_enter}
    <div class="dummy-block-container disallowed">
      <span>{l s='Please enter your email to see payment options' mod='thecheckout'}</span></div>
  {elseif isset($wait_for_account) && $wait_for_account}
    <div class="dummy-block-container disallowed">
      <span>{l s='Please Save your Personal Info to see payment options' mod='thecheckout'}</span></div>
  {else}
    {block name='payment_options'}
      {hook h='displayPaymentTop'}

      {if $is_free}
        <p>{l s='No payment needed for this order' d='Shop.Theme.Checkout'}</p>
      {/if}
      {if isset($payment_data)}
        <div id="payment_data">
          {foreach from=$payment_data key="data_key" item="data_item"}
            <input type="hidden" id="payment_data_{$data_key|escape:'javascript':'UTF-8'}" value="{$data_item|escape:'javascript':'UTF-8'}">
          {/foreach}
        </div>
      {/if}
      <div class="payment-options {if $is_free}hidden-xs-up{/if}">
        {foreach from=$payment_options key="module_name" item="module_options"}
          {foreach from=$module_options item="option" name="multioptions"}
            <div
                    id="{$option.id|escape:'javascript':'UTF-8'}-main-title"
                    class="tc-main-title"
                    data-payment-module="{$module_name|escape:'javascript':'UTF-8'}"
            >
              <div id="{$option.id|escape:'javascript':'UTF-8'}-container" class="payment-option">
                <span class="custom-radio float-xs-left">
                  {assign var="actual_option_name" value=$option.module_name|default:$module_name}
                    {assign var="sanitized_module_name" value=$actual_option_name|regex_replace:"/[^a-zA-Z-_0-9]/":""}
                    {assign var="data_module_name" value="{$sanitized_module_name}{$option.call_to_action_text_md5}"}

                  <input
                          class="ps-shown-by-js {if $option.binary}binary{/if}"
                          id="{$option.id|escape:'javascript':'UTF-8'}"
                          data-module-name="{$data_module_name}"
                          name="payment-option"
                          type="radio"
                          required
                          {if $selected_payment_option == $data_module_name
                            || $is_free
                            || ($payment_options|@count === 1 && $module_options|@count === 1)}checked{/if}
                  >
                  <span></span>
                </span>

                <label for="{$option.id|escape:'javascript':'UTF-8'}">
                  <div class="payment-call-to-action-and-logo">
                    <span class="h6">{$option.call_to_action_text|escape:'javascript':'UTF-8'}</span>
                  </div>
                  
                  {if $option.id === 'payment-option-1'}
                    <svg width="62" height="42" viewBox="0 0 62 42" fill="none" xmlns="http://www.w3.org/2000/svg">
                      <path d="M55.2314 0.625C58.338 0.625002 60.8564 3.1434 60.8564 6.25V35C60.8564 38.1066 58.338 40.625 55.2314 40.625H6.48145C3.37485 40.625 0.856447 38.1066 0.856445 35V6.25C0.856445 3.1434 3.37484 0.625 6.48145 0.625H55.2314Z" fill="white" stroke="#D3D3D3" stroke-width="1.25"/>
                      <path d="M26.2399 19.1387V18.9876L29.2799 13.8676H26.5066V12.7387H31.3955V12.8898L28.3733 18.0009H31.3066V19.1387H26.2399ZM33.7927 19.272C33.449 19.272 33.1572 19.2068 32.9172 19.0764C32.6801 18.9431 32.4994 18.7668 32.3749 18.5476C32.2535 18.3253 32.1927 18.0809 32.1927 17.8142C32.1927 17.592 32.2268 17.389 32.2949 17.2053C32.3631 17.0216 32.4727 16.8602 32.6238 16.7209C32.7779 16.5787 32.9838 16.4602 33.2416 16.3653C33.4194 16.3002 33.6312 16.2424 33.8772 16.192C34.1231 16.1416 34.4016 16.0942 34.7127 16.0498C35.0238 16.0024 35.366 15.9505 35.7394 15.8942L35.3038 16.1342C35.3038 15.8498 35.2357 15.6409 35.0994 15.5076C34.9631 15.3742 34.7349 15.3076 34.4149 15.3076C34.2372 15.3076 34.052 15.3505 33.8594 15.4364C33.6668 15.5224 33.532 15.675 33.4549 15.8942L32.3616 15.5476C32.4831 15.1505 32.7112 14.8276 33.046 14.5787C33.3809 14.3298 33.8372 14.2053 34.4149 14.2053C34.8386 14.2053 35.2149 14.2705 35.5438 14.4009C35.8727 14.5313 36.1216 14.7564 36.2905 15.0764C36.3853 15.2542 36.4416 15.432 36.4594 15.6098C36.4772 15.7876 36.486 15.9861 36.486 16.2053V19.1387H35.4283V18.152L35.5794 18.3564C35.3453 18.6794 35.092 18.9135 34.8194 19.0587C34.5498 19.2009 34.2075 19.272 33.7927 19.272ZM34.0505 18.3209C34.2727 18.3209 34.4594 18.2824 34.6105 18.2053C34.7646 18.1253 34.886 18.035 34.9749 17.9342C35.0668 17.8335 35.129 17.749 35.1616 17.6809C35.2238 17.5505 35.2594 17.3994 35.2683 17.2276C35.2801 17.0527 35.286 16.9076 35.286 16.792L35.6416 16.8809C35.2831 16.9402 34.9927 16.9905 34.7705 17.032C34.5483 17.0705 34.369 17.1061 34.2327 17.1387C34.0964 17.1713 33.9764 17.2068 33.8727 17.2453C33.7542 17.2927 33.6579 17.3446 33.5838 17.4009C33.5127 17.4542 33.4594 17.5135 33.4238 17.5787C33.3912 17.6439 33.3749 17.7164 33.3749 17.7964C33.3749 17.9061 33.4016 18.0009 33.4549 18.0809C33.5112 18.1579 33.5898 18.2172 33.6905 18.2587C33.7912 18.3002 33.9112 18.3209 34.0505 18.3209ZM10.8262 30.272C10.3492 30.272 9.95067 30.1609 9.63067 29.9387C9.31067 29.7164 9.06918 29.4142 8.90622 29.032C8.74622 28.6498 8.66622 28.2187 8.66622 27.7387C8.66622 27.2587 8.74622 26.8276 8.90622 26.4453C9.06622 26.0631 9.30178 25.7609 9.61289 25.5387C9.924 25.3164 10.3077 25.2053 10.764 25.2053C11.2233 25.2053 11.6233 25.315 11.964 25.5342C12.3047 25.7535 12.5684 26.0542 12.7551 26.4364C12.9447 26.8157 13.0396 27.2498 13.0396 27.7387C13.0396 28.2187 12.9462 28.6498 12.7596 29.032C12.5759 29.4142 12.3181 29.7164 11.9862 29.9387C11.6544 30.1609 11.2677 30.272 10.8262 30.272ZM8.46178 32.272V25.3387H9.52844V28.6276H9.67956V32.272H8.46178ZM10.6307 29.1964C10.8914 29.1964 11.1047 29.1313 11.2707 29.0009C11.4366 28.8705 11.5596 28.6957 11.6396 28.4764C11.7196 28.2542 11.7596 28.0083 11.7596 27.7387C11.7596 27.472 11.7181 27.229 11.6351 27.0098C11.5521 26.7876 11.4233 26.6113 11.2484 26.4809C11.0766 26.3476 10.8559 26.2809 10.5862 26.2809C10.3344 26.2809 10.1299 26.3416 9.97289 26.4631C9.81881 26.5846 9.70622 26.755 9.63511 26.9742C9.564 27.1935 9.52844 27.4483 9.52844 27.7387C9.52844 28.029 9.564 28.2839 9.63511 28.5031C9.70622 28.7224 9.82178 28.8927 9.98178 29.0142C10.1447 29.1357 10.361 29.1964 10.6307 29.1964ZM16.1775 30.272C15.6946 30.272 15.2709 30.1639 14.9064 29.9476C14.542 29.7313 14.2575 29.4335 14.0531 29.0542C13.8516 28.672 13.7509 28.2335 13.7509 27.7387C13.7509 27.2379 13.8546 26.7979 14.062 26.4187C14.2694 26.0364 14.5553 25.7387 14.9198 25.5253C15.2842 25.312 15.7035 25.2053 16.1775 25.2053C16.6605 25.2053 17.0842 25.3135 17.4487 25.5298C17.8161 25.7461 18.102 26.0453 18.3064 26.4276C18.5109 26.8068 18.6131 27.2439 18.6131 27.7387C18.6131 28.2364 18.5094 28.6764 18.302 29.0587C18.0975 29.4379 17.8116 29.7357 17.4442 29.952C17.0798 30.1653 16.6575 30.272 16.1775 30.272ZM16.1775 29.1431C16.5657 29.1431 16.8546 29.0127 17.0442 28.752C17.2368 28.4883 17.3331 28.1505 17.3331 27.7387C17.3331 27.312 17.2353 26.9713 17.0398 26.7164C16.8472 26.4616 16.5598 26.3342 16.1775 26.3342C15.9138 26.3342 15.6975 26.3935 15.5287 26.512C15.3598 26.6305 15.2338 26.795 15.1509 27.0053C15.0709 27.2157 15.0309 27.4602 15.0309 27.7387C15.0309 28.1683 15.1272 28.5105 15.3198 28.7653C15.5153 29.0172 15.8012 29.1431 16.1775 29.1431ZM21.946 30.272C21.469 30.272 21.0705 30.1609 20.7505 29.9387C20.4305 29.7164 20.189 29.4142 20.026 29.032C19.866 28.6498 19.786 28.2187 19.786 27.7387C19.786 27.2587 19.866 26.8276 20.026 26.4453C20.186 26.0631 20.4216 25.7609 20.7327 25.5387C21.0438 25.3164 21.4275 25.2053 21.8838 25.2053C22.343 25.2053 22.743 25.315 23.0838 25.5342C23.4245 25.7535 23.6882 26.0542 23.8749 26.4364C24.0645 26.8157 24.1593 27.2498 24.1593 27.7387C24.1593 28.2187 24.066 28.6498 23.8793 29.032C23.6956 29.4142 23.4379 29.7164 23.106 29.9387C22.7742 30.1609 22.3875 30.272 21.946 30.272ZM19.5816 30.1387V23.7387H20.7993V26.8498H20.6482V30.1387H19.5816ZM21.7505 29.1964C22.0112 29.1964 22.2245 29.1313 22.3905 29.0009C22.5564 28.8705 22.6793 28.6957 22.7593 28.4764C22.8393 28.2542 22.8793 28.0083 22.8793 27.7387C22.8793 27.472 22.8379 27.229 22.7549 27.0098C22.6719 26.7876 22.543 26.6113 22.3682 26.4809C22.1964 26.3476 21.9756 26.2809 21.706 26.2809C21.4542 26.2809 21.2497 26.3416 21.0927 26.4631C20.9386 26.5846 20.826 26.755 20.7549 26.9742C20.6838 27.1935 20.6482 27.4483 20.6482 27.7387C20.6482 28.029 20.6838 28.2839 20.7549 28.5031C20.826 28.7224 20.9416 28.8927 21.1016 29.0142C21.2645 29.1357 21.4808 29.1964 21.7505 29.1964ZM25.1373 30.1387V25.3387H26.204V26.512L26.0884 26.3609C26.1507 26.195 26.2336 26.0439 26.3373 25.9076C26.441 25.7713 26.5684 25.6587 26.7196 25.5698C26.8351 25.4987 26.961 25.4439 27.0973 25.4053C27.2336 25.3639 27.3744 25.3387 27.5196 25.3298C27.6647 25.3179 27.8099 25.3209 27.9551 25.3387V26.4676C27.8218 26.4261 27.6662 26.4127 27.4884 26.4276C27.3136 26.4394 27.1551 26.4794 27.0129 26.5476C26.8707 26.6127 26.7507 26.7002 26.6529 26.8098C26.5551 26.9164 26.481 27.0439 26.4307 27.192C26.3803 27.3372 26.3551 27.5016 26.3551 27.6853V30.1387H25.1373ZM30.0384 30.272C29.6947 30.272 29.4028 30.2068 29.1628 30.0764C28.9258 29.9431 28.745 29.7668 28.6206 29.5476C28.4991 29.3253 28.4384 29.0809 28.4384 28.8142C28.4384 28.592 28.4724 28.389 28.5406 28.2053C28.6087 28.0216 28.7184 27.8602 28.8695 27.7209C29.0236 27.5787 29.2295 27.4602 29.4873 27.3653C29.665 27.3002 29.8769 27.2424 30.1228 27.192C30.3687 27.1416 30.6473 27.0942 30.9584 27.0498C31.2695 27.0024 31.6117 26.9505 31.985 26.8942L31.5495 27.1342C31.5495 26.8498 31.4813 26.6409 31.345 26.5076C31.2087 26.3742 30.9806 26.3076 30.6606 26.3076C30.4828 26.3076 30.2976 26.3505 30.105 26.4364C29.9124 26.5224 29.7776 26.675 29.7006 26.8942L28.6073 26.5476C28.7287 26.1505 28.9569 25.8276 29.2917 25.5787C29.6265 25.3298 30.0828 25.2053 30.6606 25.2053C31.0843 25.2053 31.4606 25.2705 31.7895 25.4009C32.1184 25.5313 32.3673 25.7564 32.5362 26.0764C32.631 26.2542 32.6873 26.432 32.705 26.6098C32.7228 26.7876 32.7317 26.9861 32.7317 27.2053V30.1387H31.6739V29.152L31.825 29.3564C31.591 29.6794 31.3376 29.9135 31.065 30.0587C30.7954 30.2009 30.4532 30.272 30.0384 30.272ZM30.2962 29.3209C30.5184 29.3209 30.705 29.2824 30.8562 29.2053C31.0102 29.1253 31.1317 29.035 31.2206 28.9342C31.3124 28.8335 31.3747 28.749 31.4073 28.6809C31.4695 28.5505 31.505 28.3994 31.5139 28.2276C31.5258 28.0527 31.5317 27.9076 31.5317 27.792L31.8873 27.8809C31.5287 27.9402 31.2384 27.9905 31.0162 28.032C30.7939 28.0705 30.6147 28.1061 30.4784 28.1387C30.3421 28.1713 30.2221 28.2068 30.1184 28.2453C29.9999 28.2927 29.9036 28.3446 29.8295 28.4009C29.7584 28.4542 29.705 28.5135 29.6695 28.5787C29.6369 28.6439 29.6206 28.7164 29.6206 28.7964C29.6206 28.9061 29.6473 29.0009 29.7006 29.0809C29.7569 29.1579 29.8354 29.2172 29.9362 29.2587C30.0369 29.3002 30.1569 29.3209 30.2962 29.3209ZM37.1584 30.1387V27.872C37.1584 27.7624 37.1525 27.6231 37.1407 27.4542C37.1288 27.2824 37.0918 27.1105 37.0296 26.9387C36.9673 26.7668 36.8651 26.6231 36.7229 26.5076C36.5836 26.392 36.3851 26.3342 36.1273 26.3342C36.0236 26.3342 35.9125 26.3505 35.794 26.3831C35.6755 26.4157 35.5644 26.4794 35.4607 26.5742C35.357 26.6661 35.271 26.8024 35.2029 26.9831C35.1377 27.1639 35.1051 27.4039 35.1051 27.7031L34.4118 27.3742C34.4118 26.995 34.4888 26.6394 34.6429 26.3076C34.797 25.9757 35.0281 25.7076 35.3362 25.5031C35.6473 25.2987 36.0384 25.1964 36.5096 25.1964C36.8858 25.1964 37.1925 25.2602 37.4296 25.3876C37.6666 25.515 37.8503 25.6764 37.9807 25.872C38.114 26.0676 38.2088 26.272 38.2651 26.4853C38.3214 26.6957 38.3555 26.8883 38.3673 27.0631C38.3792 27.2379 38.3851 27.3653 38.3851 27.4453V30.1387H37.1584ZM33.8784 30.1387V25.3387H34.954V26.9298H35.1051V30.1387H33.8784ZM39.6273 24.672V23.6053H40.8362V24.672H39.6273ZM39.6273 30.1387V25.3387H40.8362V30.1387H39.6273ZM44.3997 30.272C43.9078 30.272 43.4738 30.1668 43.0975 29.9564C42.7241 29.7431 42.4308 29.4513 42.2175 29.0809C42.0071 28.7076 41.9019 28.2809 41.9019 27.8009C41.9019 27.2764 42.0056 26.8202 42.213 26.432C42.4204 26.0439 42.7064 25.7431 43.0708 25.5298C43.4352 25.3135 43.8545 25.2053 44.3286 25.2053C44.8323 25.2053 45.2604 25.3239 45.613 25.5609C45.9656 25.7979 46.2264 26.1313 46.3952 26.5609C46.5641 26.9905 46.6234 27.4957 46.573 28.0764H45.3775V27.632C45.3775 27.1431 45.2989 26.792 45.1419 26.5787C44.9878 26.3624 44.7345 26.2542 44.3819 26.2542C43.9701 26.2542 43.6664 26.3802 43.4708 26.632C43.2782 26.8809 43.1819 27.2498 43.1819 27.7387C43.1819 28.1861 43.2782 28.5327 43.4708 28.7787C43.6664 29.0216 43.9523 29.1431 44.3286 29.1431C44.5656 29.1431 44.7686 29.0913 44.9375 28.9876C45.1064 28.8839 45.2352 28.7342 45.3241 28.5387L46.533 28.8853C46.3523 29.3239 46.0664 29.6646 45.6752 29.9076C45.2871 30.1505 44.8619 30.272 44.3997 30.272ZM42.8086 28.0764V27.1787H45.9908V28.0764H42.8086ZM53.2241 30.1387V27.3031C53.2241 26.9861 53.1486 26.7402 52.9975 26.5653C52.8493 26.3876 52.6434 26.2987 52.3797 26.2987C52.2108 26.2987 52.0641 26.3387 51.9397 26.4187C51.8152 26.4957 51.7175 26.6053 51.6464 26.7476C51.5782 26.8868 51.5441 27.0483 51.5441 27.232L51.0375 26.8942C51.0375 26.5653 51.1145 26.275 51.2686 26.0231C51.4256 25.7713 51.6345 25.5757 51.8952 25.4364C52.1589 25.2942 52.4508 25.2231 52.7708 25.2231C53.3189 25.2231 53.7323 25.3861 54.0108 25.712C54.2923 26.035 54.433 26.4587 54.433 26.9831V30.1387H53.2241ZM47.4375 30.1387V25.3387H48.5041V26.9298H48.6552V30.1387H47.4375ZM50.3352 30.1387V27.3031C50.3352 26.9861 50.2597 26.7402 50.1086 26.5653C49.9604 26.3876 49.7545 26.2987 49.4908 26.2987C49.2389 26.2987 49.036 26.3861 48.8819 26.5609C48.7308 26.7327 48.6552 26.9564 48.6552 27.232L48.1486 26.8764C48.1486 26.5624 48.2271 26.2809 48.3841 26.032C48.5412 25.7831 48.7515 25.5861 49.0152 25.4409C49.2819 25.2957 49.5797 25.2231 49.9086 25.2231C50.2849 25.2231 50.593 25.3031 50.833 25.4631C51.076 25.6231 51.2552 25.8364 51.3708 26.1031C51.4864 26.3698 51.5441 26.6631 51.5441 26.9831V30.1387H50.3352Z" fill="#333333"/>
                    </svg>
                  {/if}
                </label>
              </div>
              <div
                      id="pay-with-{$option.id|escape:'javascript':'UTF-8'}-form"
                      class="js-payment-option-form {if $option.id != $selected_payment_option} ps-hidden {/if}"
              >
                {if $option.form}
                  {$option.form nofilter}
                {else}
                  <form class="payment-form" method="POST" action="{$option.action nofilter}">
                    {foreach from=$option.inputs item=input}
                      <input type="{$input.type|escape:'javascript':'UTF-8'}" name="{$input.name|escape:'javascript':'UTF-8'}" value="{$input.value|escape:'htmlall':'UTF-8'}">
                    {/foreach}
                    <button style="display:none" id="pay-with-{$option.id|escape:'javascript':'UTF-8'}" type="submit"></button>
                  </form>
                {/if}
              </div>
            </div>
          {/foreach}
          {foreachelse}
          <p class="alert alert-danger">{l s='Unfortunately, there are no payment method available.' d='Shop.Theme.Checkout'}</p>
        {/foreach}
      </div>
      {if $payment_options|count > 1}
        <div id="expand_other_payment_options">
          <div class="btn btn-secondary"><span>{l s='Other payment options' mod='thecheckout'}</span></div>
        </div>
      {/if}
      {hook h='displayPaymentByBinaries'}
    {/block}
  {/if}
</div>
